{"version":3,"sources":["uni-app:///main.js","webpack:////Users/bin/Downloads/sns/pages/user-space/user-space.vue?fe51","webpack:////Users/bin/Downloads/sns/pages/user-space/user-space.vue?8c53","webpack:////Users/bin/Downloads/sns/pages/user-space/user-space.vue?bb17","webpack:////Users/bin/Downloads/sns/pages/user-space/user-space.vue?dd9f","uni-app:///pages/user-space/user-space.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,2G;AACAA,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;;;AAGzD;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5BA;AAAA;AAAA;AAAA;AAAyzB,CAAgB,wyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwF70B;AACA,gD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AARA,sCACA,+CACA,2DACA,mC,i3CASA,EACA,cACA,sBADA,EAEA,kBAFA,EAGA,kBAHA,EAIA,oBAJA,EADA,EAOA,IAPA,kBAOA,CACA,SACA,UADA,EAEA,YAFA,EAGA,gBAHA,EAIA,WACA,UADA,EAEA,MAFA,IAGA,EACA,UADA,EAEA,MAFA,EAHA,EAMA,EACA,UADA,EAEA,MAFA,EANA,CAJA,EAcA,WAdA,EAeA,YACA,UADA,IAEA,EACA,UADA,EAEA,QAFA,EAGA,kBAHA,EAIA,OAJA,EAFA,EAOA,EACA,UADA,EAEA,QAFA,EAGA,kBAHA,EAIA,OAJA,EAPA,CAfA,GA6BA,CArCA,EAsCA,wBAtCA,sCAsCA,CACA,6BACA,CAxCA,EAyCA,4BACA,sBACA,+CADA,GADA,IAIA,IAJA,kBAIA,CACA,wCACA,CANA,EAOA,QAPA,sBAOA,CACA,4CACA,CATA,EAUA,WAVA,yBAUA,CACA,2CACA,CAZA,EAaA,UAbA,wBAaA,CACA,yCACA,CAfA,GAzCA,EA0DA,WACA,SADA,qBACA,KADA,EACA,CACA,kCACA,CAHA,EAIA,YAJA,wBAIA,KAJA,EAIA,CACA,kBACA,qCACA,CAFA,MAEA,CACA,aACA,CACA,CAVA,EA1DA,EAsEA,MAtEA,kBAsEA,CAtEA,EAsEA,kBACA,iBACA,uBACA,aADA,EAEA,YAFA,IAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBANA;;AAQA,KATA;AAUA,GA3FA;AA4FA,UA5FA,sBA4FA;AACA;AACA,GA9FA;AA+FA;AACA,yBADA,mCACA;AACA;AACA;AACA,qCADA;;AAGA;AACA;AACA,KARA;AASA;AACA,eAVA,yBAUA;AACA;AACA,mBADA;AAEA,qBAFA;AAGA,UAHA,CAGA;AACA;AACA;AACA,yCADA;;AAGA;AACA;AACA;AACA;AACA,OAZA;AAaA,KAxBA;AAyBA,aAzBA,qBAyBA,KAzBA,EAyBA;AACA;AACA;AACA,KA5BA;AA6BA;AACA,UA9BA,kBA8BA,OA9BA,EA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA;AAKA;AACA,OARA;AASA;AACA,qBADA;;AAGA,KA5CA;AA6CA;AACA,aA9CA,qBA8CA,CA9CA,EA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA;AACA,WAXA,MAWA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA,OAzBA;AA0BA;AACA;AACA,yBADA;;AAGA,KA9EA;AA+EA;AACA,WAhFA,qBAgFA;AACA;AACA;AACA;AACA;AACA;AACA,UADA,CACA;AACA;AACA;AACA,OAJA,EAIA,KAJA,CAIA;AACA;AACA;AACA;AACA,OARA;AASA,KA9FA;AA+FA;AACA,YAhGA,sBAgGA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA;AACA,qBADA,EAFA;AAIA,YAJA,CAIA;AACA;AACA;AACA,6BADA;AAEA,wBAFA;;AAIA;AACA;AACA,SAZA;AAaA,OAhBA;AAiBA,KAlHA;AAmHA;AACA,gBApHA,0BAoHA;AACA;AACA,6CADA;;AAGA,KAxHA;AAyHA;AACA,WA1HA,qBA0HA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA;AACA;AACA;AACA,kCADA;AAEA;AACA,2BADA,EAFA;AAIA,kBAJA,CAIA;AACA;AACA;AACA,mCADA;AAEA,8BAFA;;AAIA,eAVA;AAWA;AACA,WAhBA;;;AAmBA,OAtBA;AAuBA,KAlJA;AAmJA,YAnJA,sBAmJA;AACA;AACA,wBADA;AAEA,wCAFA;AAGA,oCAHA;;AAKA;AACA,sEADA;;AAGA,KA5JA,EA/FA,E","file":"pages/user-space/user-space.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/user-space/user-space.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user-space.vue?vue&type=template&id=23cdf4c6&\"\nvar renderjs\nimport script from \"./user-space.vue?vue&type=script&lang=js&\"\nexport * from \"./user-space.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user-space/user-space.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-space.vue?vue&type=template&id=23cdf4c6&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 = _vm._f(\"formatAvatar\")(_vm.userinfo.avatar)\n\n  var l0 = _vm.__map(_vm.counts, function(item, index) {\n    var f1 = _vm._f(\"formatNum\")(item.num)\n\n    return {\n      $orig: _vm.__get_orig(item),\n      f1: f1\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0,\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-space.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-space.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<!-- #ifdef MP -->\r\n\t\t<uni-nav-bar :shadow=\"false\" :fixed=\"true\" :border=\"false\" right-text=\"菜单\" @click-right=\"clickNavigationButton\"></uni-nav-bar>\r\n\t\t<!-- #endif -->\r\n\t\t<!-- 头部 -->\r\n\t\t<view class=\"flex align-center p-3 border-bottom border-light-secondary\">\r\n\t\t\t<image :src=\"userinfo.avatar|formatAvatar\" style=\"width: 180rpx;height: 180rpx;\" class=\"rounded-circle\"></image>\r\n\t\t\t<view class=\"pl-3 flex flex-column flex-1\">\r\n\t\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t\t<view class=\"flex-1 flex flex-column align-center justify-center\" v-for=\"(item,index) in counts\" :key=\"index\">\r\n\t\t\t\t\t\t<text class=\"font-lg font-weight-bold\">{{item.num|formatNum}}</text>\r\n\t\t\t\t\t\t<text class=\"font text-muted\">{{item.name}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex justify-center align-center\">\r\n\r\n\t\t\t\t\t<button v-if=\"user_id == user.user_id\" type=\"default\" size=\"mini\" style=\"width: 400rpx;\" @click=\"openUserInfo\">\r\n\t\t\t\t\t\t编辑资料\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t<button v-else type=\"default\" size=\"mini\" :class=\"is_follow ? 'bg-light text-dark' : 'bg-main'\" style=\"width: 400rpx;\"\r\n\t\t\t\t\t @click=\"doFollow\">\r\n\t\t\t\t\t\t{{is_follow ? '已关注' : '关注'}}\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- tab -->\r\n\t\t<view class=\"flex align-center\" style=\"height: 100rpx;\">\r\n\t\t\t<view class=\"flex-1 flex align-center justify-center\" v-for=\"(item,index) in tabBars\" :key=\"index\" :class=\"index === tabIndex ? 'font-lg font-weight-bold text-main':'font-md'\"\r\n\t\t\t @click=\"changeTab(index)\">\r\n\t\t\t\t{{item.name}}</view>\r\n\t\t</view>\r\n\r\n\t\t<template v-if=\"tabIndex === 0\">\r\n\t\t\t<view class=\"animated fast fadeIn\">\r\n\t\t\t\t<view class=\"p-3 border-bottom\">\r\n\t\t\t\t\t<view class=\"font-md\">账号信息</view>\r\n\t\t\t\t\t<view class=\"font\">账号id：{{user_id}}</view>\n\t\t\t\t\t<view class=\"font\">昵称：{{userinfo.nickname}}</view>\n\t\t\t\t\t<view class=\"font\">个性签名：{{userinfo.sign}}</view>\n\t\t\t\t\t<view class=\"font\">性别：{{genderName}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"p-3 border-bottom\">\r\n\t\t\t\t\t<view class=\"font-md\">个人信息</view>\r\n\t\t\t\t\t<view class=\"font\">生日：{{userinfo.birthday}}</view>\r\n\t\t\t\t\t<view class=\"font\">职业：{{userinfo.job}}</view>\r\n\t\t\t\t\t<view class=\"font\">故乡：{{userinfo.hometown}}</view>\r\n\t\t\t\t\t<view class=\"font\">情感：{{emotionName}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</template>\r\n\t\t<template v-else>\r\n\t\t\t<view class=\"animated fast fadeIn\">\r\n\t\t\t\t<common-list v-for=\"(item,index) in list\" :key=\"index\" :item=\"item\" :index=\"index\" @follow=\"follow\" @doSupport=\"doSupport\"></common-list>\r\n\t\t\t\t<divider></divider>\r\n\t\t\t\t<load-more :loadmore=\"loadmore\"></load-more>\r\n\t\t\t</view>\r\n\t\t</template>\r\n\r\n\r\n\r\n\t\t<!-- 弹出层 -->\r\n\t\t<uni-popup ref=\"popup\" type=\"top\">\r\n\t\t\t<view class=\"flex align-center justify-center font-md border-bottom py-2\" hover-class=\"bg-light\" @click=\"doBlack\">\r\n\t\t\t\t<text class=\"iconfont icon-bianji mr-2\"></text>\r\n\t\t\t\t{{userinfo.isblack ? '移出黑名单' : '加入黑名单'}}\r\n\t\t\t</view>\r\n\t\t\t<view v-if=\"!userinfo.isblack\" class=\"flex align-center justify-center font-md py-2\" hover-class=\"bg-light\" @click=\"openChat\">\r\n\t\t\t\t<text class=\"iconfont icon-keyboard mr-2\"></text> 聊天\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tconst emotionArray = ['保密', '未婚', '已婚']\r\n\tconst loadNameArray = ['上拉加载更多', '加载中', '没有更多了']\r\n\tconst jobArray = ['保密', '程序猿鼓励师', '程序猿', '教师', '农民', '游戏陪练']\r\n\tconst genderArray = ['保密', '男', '女']\r\n\timport commonList from '@/components/common/common-list.vue';\r\n\timport loadMore from '@/components/common/load-more.vue';\r\n\timport uniPopup from '@/components/uni-ui/uni-popup/uni-popup.vue';\r\n\timport $T from '@/common/time.js';\r\n\timport {\r\n\t\tmapState\r\n\t} from 'vuex'\r\n\timport uniNavBar from '@/components/uni-ui/uni-nav-bar/uni-nav-bar.vue';\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tcommonList,\r\n\t\t\tloadMore,\r\n\t\t\tuniPopup,\r\n\t\t\tuniNavBar\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tuser_id: 0,\r\n\t\t\t\tuserinfo: {},\r\n\t\t\t\tis_follow: false,\r\n\t\t\t\tcounts: [{\r\n\t\t\t\t\tname: \"帖子\",\r\n\t\t\t\t\tnum: 0\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: \"关注\",\r\n\t\t\t\t\tnum: 0\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: \"粉丝\",\r\n\t\t\t\t\tnum: 0\r\n\t\t\t\t}],\r\n\t\t\t\ttabIndex: 0,\r\n\t\t\t\ttabBars: [{\r\n\t\t\t\t\tname: \"主页\",\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: \"动态\",\r\n\t\t\t\t\tlist: [],\r\n\t\t\t\t\tloadmore: \"上拉加载更多\",\r\n\t\t\t\t\tpage: 1\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: \"帖子\",\r\n\t\t\t\t\tlist: [],\r\n\t\t\t\t\tloadmore: \"上拉加载更多\",\r\n\t\t\t\t\tpage: 1\r\n\t\t\t\t}],\r\n\t\t\t}\r\n\t\t},\r\n\t\tonNavigationBarButtonTap() {\r\n\t\t\tthis.clickNavigationButton()\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tuser: state => state.user\r\n\t\t\t}),\r\n\t\t\tlist() {\r\n\t\t\t\treturn this.tabBars[this.tabIndex].list\r\n\t\t\t},\r\n\t\t\tloadmore() {\r\n\t\t\t\treturn this.tabBars[this.tabIndex].loadmore\r\n\t\t\t},\n\t\t\temotionName() {\n\t\t\t\treturn emotionArray[this.userinfo.emotion]\n\t\t\t},\n\t\t\tgenderName() {\n\t\t\t\treturn genderArray[this.userinfo.gender]\n\t\t\t}\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\tformatNum(value) {\r\n\t\t\t\treturn value > 99 ? '99+' : value;\r\n\t\t\t},\n\t\t\tformatAvatar(value) {\n\t\t\t\tif (value == \"\") {\n\t\t\t\t\treturn value = \"/static/default.jpg\";\n\t\t\t\t} else {\n\t\t\t\t\treturn value\n\t\t\t\t}\n\t\t\t},\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tif (!e.user_id) {\r\n\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\ttitle: '非法参数',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.user_id = parseInt(e.user_id)\r\n\t\t\t// 加载用户个人信息\r\n\t\t\tthis.getUserInfo()\r\n\t\t\t// 监听关注和顶踩操作\r\n\t\t\tuni.$on('updateFollowOrSupport', (e) => {\r\n\t\t\t\tswitch (e.type) {\r\n\t\t\t\t\tcase 'follow': // 关注\r\n\t\t\t\t\t\tthis.follow(e.data.user_id)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'support': // 顶踩\r\n\t\t\t\t\t\tthis.doSupport(e.data)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tuni.$off('updateFollowOrSupport', (e) => {})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tclickNavigationButton() {\r\n\t\t\t\tif (this.user_id == this.user.user_id) {\r\n\t\t\t\t\treturn uni.navigateTo({\r\n\t\t\t\t\t\turl: '../user-set/user-set',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.$refs.popup.open()\r\n\t\t\t},\r\n\t\t\t// 获取用户个人信息\r\n\t\t\tgetUserInfo() {\r\n\t\t\t\tthis.$H.get('/user/space?uid=' + this.user_id, {}, {\r\n\t\t\t\t\ttoken: true,\r\n\t\t\t\t\tnotoast: true\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.userinfo = res.info\r\n\t\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\t\ttitle: this.userinfo.username\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.counts[0].num = res.post_count\r\n\t\t\t\t\tthis.counts[1].num = res.follow_count\r\n\t\t\t\t\tthis.counts[2].num = res.Fens_count\r\n\t\t\t\t\tthis.is_follow = res.is_follow\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tchangeTab(index) {\r\n\t\t\t\tthis.tabIndex = index\r\n\t\t\t\tthis.getList()\r\n\t\t\t},\r\n\t\t\t// 关注\r\n\t\t\tfollow(user_id) {\r\n\t\t\t\t// 找到当前作者的所有列表\r\n\t\t\t\tthis.tabBars.forEach(tab => {\r\n\t\t\t\t\tif (tab.list) {\r\n\t\t\t\t\t\ttab.list.forEach((item) => {\r\n\t\t\t\t\t\t\tif (item.user_id === user_id) {\r\n\t\t\t\t\t\t\t\titem.state.follow = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '关注成功'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 顶踩操作\r\n\t\t\tdoSupport(e) {\r\n\t\t\t\t// 拿到当前的选项卡对应的list\r\n\t\t\t\tthis.tabBars[this.tabIndex].list.forEach(item => {\r\n\t\t\t\t\tif (item.id === e.id) {\n\t\t\t\t\t\tif (e.type === 'support') {\n\t\t\t\t\t\t\t// 之前没有操作过\n\t\t\t\t\t\t\tif (item.state.type === 0) {\n\t\t\t\t\t\t\t\titem.like_count++\n\t\t\t\t\t\t\t} else if (item.state.type === 2) {\n\t\t\t\t\t\t\t\titem.like_count++;\n\t\t\t\t\t\t\t\titem.unlike_count--;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn this.$U.toast(\"已操作过哦\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titem.state.type = 1\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (item.state.type === 0) {\n\t\t\t\t\t\t\t\titem.unlike_count++\n\t\t\t\t\t\t\t} else if (item.state.type === 1) {\n\t\t\t\t\t\t\t\titem.like_count--;\n\t\t\t\t\t\t\t\titem.unlike_count++;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn this.$U.toast(\"已操作过哦\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titem.state.type = 2\n\t\t\t\t\t\t}\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tlet msg = e.type === 'support' ? '顶' : '踩'\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: msg + '成功'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取文章列表\r\n\t\t\tgetList() {\r\n\t\t\t\tlet index = this.tabIndex\r\n\t\t\t\tif (index === 0) return;\r\n\t\t\t\tlet page = this.tabBars[index].page\r\n\t\t\t\tlet isrefresh = page === 1\r\n\t\t\t\tthis.$H.get('/post/my?uid=' + this.user_id + '&type=' + this.tabIndex +  '&p=' + page)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tthis.tabBars[index].list = isrefresh ? [...res] : [...this.tabBars[index].list, ...res]\r\n\t\t\t\t\t\tthis.tabBars[index].loadmore = res.length < 10 ? '没有更多了' : '上拉加载更多'\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tif (!isrefresh) {\r\n\t\t\t\t\t\t\tthis.tabBars[index].page--\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 关注/取消关注\r\n\t\t\tdoFollow() {\r\n\t\t\t\tthis.checkAuth(() => {\r\n\t\t\t\t\tlet url = this.is_follow ? '/user/unfollow' : '/user/follow'\r\n\t\t\t\t\tlet msg = this.is_follow ? '取消关注' : '关注'\r\n\t\t\t\t\tthis.$H.post(url, {\r\n\t\t\t\t\t\tuser_id: this.user_id\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttoken: true\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tthis.is_follow = !this.is_follow\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: msg + '成功',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tuni.$emit('updateIndex')\r\n\t\t\t\t\t\tthis.getList()\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 进入编辑资料\r\n\t\t\topenUserInfo() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../user-userinfo/user-userinfo',\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 加入/移出黑名单\r\n\t\t\tdoBlack() {\r\n\t\t\t\tthis.checkAuth(() => {\r\n\t\t\t\t\tlet url = this.userinfo.isblack ? '/removeblack' : '/addblack'\r\n\t\t\t\t\tlet msg = this.userinfo.isblack ? '移出黑名单' : '加入黑名单'\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: '是否要' + msg,\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tthis.$H.post(url, {\r\n\t\t\t\t\t\t\t\t\tid: this.user_id\r\n\t\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\t\ttoken: true\r\n\t\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\t\tthis.userinfo.isblack = !this.userinfo.isblack\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: msg + '成功',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\topenChat() {\r\n\t\t\t\tlet user = {\r\n\t\t\t\t\tid: this.user_id,\r\n\t\t\t\t\tusername: this.userinfo.username,\r\n\t\t\t\t\tavatar: this.userinfo.avatar\r\n\t\t\t\t}\r\n\t\t\t\tthis.navigateTo({\r\n\t\t\t\t\turl: \"/pages/user-chat/user-chat?user=\" + JSON.stringify(user)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n"],"sourceRoot":""}
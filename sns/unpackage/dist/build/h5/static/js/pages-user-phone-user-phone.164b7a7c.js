(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-phone-user-phone"],{1806:function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"mb-2 flex align-stretch"},[n("v-uni-view",{staticClass:"border-bottom flex align-center justify-center font px-2"},[e._v("+86")]),n("v-uni-input",{staticClass:"border-bottom p-2 flex-1",attrs:{type:"text",placeholder:"手机号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),n("v-uni-view",{staticClass:"mb-2 flex align-stretch"},[n("v-uni-input",{staticClass:"border-bottom p-2 flex-1",attrs:{type:"text",placeholder:"请输入验证码"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),n("v-uni-view",{staticClass:"border-bottom flex align-center justify-center font-sm text-white",class:e.codeTime>0?"bg-main-disabled":"bg-main",staticStyle:{width:"180rpx"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getCode.apply(void 0,arguments)}}},[e._v(e._s(e.codeTime>0?e.codeTime+" s":"获取验证码"))])],1),n("v-uni-view",{staticClass:"py-2 px-3"},[n("v-uni-button",{staticClass:"bg-main text-white",class:e.disabled?"bg-main-disabled":"",staticStyle:{"border-radius":"50rpx",border:"0"},attrs:{type:"primary",disabled:e.disabled},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("绑定")])],1)],1)},s=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i}))},"5f63":function(e,t,n){"use strict";n.r(t);var i=n("ead7"),o=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},"8ff3":function(e,t,n){"use strict";n.r(t);var i=n("1806"),o=n("5f63");for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);var a,c=n("f0c5"),r=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"1da941ba",null,!1,i["a"],a);t["default"]=r.exports},ead7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{phone:"",code:"",codeTime:0}},computed:{disabled:function(){return""===this.phone||""===this.code}},methods:{check:function(){var e=/^1[34578]\d{9}$/;return!!e.test(this.phone)||(uni.showToast({title:"手机号格式不正确",icon:"none"}),!1)},submit:function(){var e=this;this.check()&&this.$H.post("/user/bindphone",{phone:this.phone,code:this.code},{token:!0}).then((function(t){console.log("绑定成功",t),e.$store.commit("editUserInfo",{key:"phone",value:e.phone}),e.$store.commit("editUserInfo",{key:"id",value:t.user_id}),uni.navigateBack({delta:1}),uni.showToast({title:"绑定成功",icon:"none"})}))},getCode:function(){var e=this;this.codeTime>0||this.check()&&this.$H.post("/user/sendcode",{phone:this.phone},{native:!0}).then((function(t){uni.showToast({title:t.data.msg,icon:"none"}),e.codeTime=60;var n=setInterval((function(){e.codeTime>=1?e.codeTime--:(e.codeTime=0,clearInterval(n))}),1e3)}))}}};t.default=i}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-topic-detail-topic-detail"],{"01f8":function(t,e,n){"use strict";n.r(e);var i=n("d154"),a=n("af93");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("6a97");var r,s=n("f0c5"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"c4eb185e",null,!1,i["a"],r);e["default"]=u.exports},"0232":function(t,e,n){var i=n("3cf1");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("7812080b",i,!0,{sourceMap:!1,shadowMode:!1})},"3cf1":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".filter[data-v-c4eb185e]{-webkit-filter:blur(10px);filter:blur(10px)}",""]),t.exports=e},4393:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:["info"]};e.default=i},"4df3":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"position-relative"},[n("v-uni-image",{staticClass:"w-100 filter",staticStyle:{height:"300rpx"},attrs:{src:t.info.cover,mode:"aspectFill"}})],1),n("v-uni-view",{staticClass:"position-relative bg-white px-2 pb-2",staticStyle:{"z-index":"10"}},[n("v-uni-view",{staticClass:"flex"},[n("v-uni-image",{staticClass:"rounded mr-2",staticStyle:{height:"150rpx",width:"150rpx","margin-top":"-75rpx"},attrs:{src:t.info.cover}}),n("v-uni-text",{staticClass:"font-md"},[t._v("#"+t._s(t.info.title)+"#")])],1),n("v-uni-view",{staticClass:"flex align-center font text-secondary mt-1"},[n("v-uni-text",{staticClass:"mr-2"},[t._v("动态："+t._s(t.info.post_count))]),n("v-uni-text",[t._v("今日："+t._s(t.info.today_count))])],1),n("v-uni-view",{staticClass:"text-secondary font-md"},[t._v(t._s(t.info.desc))])],1)],1)},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},"59b8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:["loadmore"]};e.default=i},6375:function(t,e,n){"use strict";n.r(e);var i=n("f226"),a=n("ffb8");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var r,s=n("f0c5"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"715ba14a",null,!1,i["a"],r);e["default"]=u.exports},"6a97":function(t,e,n){"use strict";var i=n("0232"),a=n.n(i);a.a},"7fcb":function(t,e,n){"use strict";n.r(e);var i=n("4df3"),a=n("8864");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var r,s=n("f0c5"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"3fe6e1fe",null,!1,i["a"],r);e["default"]=u.exports},8864:function(t,e,n){"use strict";n.r(e);var i=n("4393"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},a16f:function(t,e,n){"use strict";var i=n("ee27");n("99af"),n("4160"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("d0ff")),o=i(n("7fcb")),r=i(n("2f50")),s=i(n("3a5b")),u=i(n("6375")),f={components:{topicInfo:o.default,commonList:r.default,noThing:s.default,loadMore:u.default},data:function(){return{info:{},recommendList:[],tabIndex:0,tabBars:[{name:"最新"},{name:"最热"}],list1:[],loadtext1:"上拉加载更多",page1:1,firstLoad1:!1,list2:[],loadtext2:"上拉加载更多",page2:1,firstLoad2:!1}},computed:{listData:function(){return 0===this.tabIndex?this.list1:this.list2},loadtext:function(){return 0===this.tabIndex?this.loadtext1:this.loadtext2}},onLoad:function(t){var e=this;t.id&&(this.__init(t.id),this.getData(t.id)),uni.$on("updateFollowOrSupport",(function(t){switch(t.type){case"follow":e.follow(t.data.user_id);break;case"support":e.doSupport(t.data);break}}))},onReachBottom:function(){this.loadmore()},onUnload:function(){uni.$off("updateFollowOrSupport",(function(t){}))},methods:{__init:function(t){var e=this;this.$H.get("/topic/detail?id="+t).then((function(t){e.info=t,e.recommendList=t.recommend,uni.setNavigationBarTitle({title:t.title})}))},changeTab:function(t){this.tabIndex=t,this["firstLoad"+(t+1)]||this.getData()},getData:function(t){var e=this;t||(t=this.info.id);var n=this.tabIndex+1,i=this["page"+n],o=1===i;this.$H.get("/topic/post_list?tid="+t+"&order="+n+"&p="+i,{},{token:!0,noCheck:!0}).then((function(t){e["list"+n]=o?(0,a.default)(t):[].concat((0,a.default)(e["list"+n]),(0,a.default)(t)),e["loadtext"+n]=t.length<10?"没有更多了":"上拉加载更多",o&&(e["firstLoad"+n]=!0)})).catch((function(t){o||e["page"+n]--}))},openDetail:function(t){uni.navigateTo({url:"../../pages/detail/detail?id="+this.recommendList[t].id})},loadmore:function(){var t=this.tabIndex;if("上拉加载更多"===this.loadtext){var e=t+1;this["loadtext"+e]="加载中...",this["page"+e]++,this.getData()}},follow:function(t){this.list1.forEach((function(e){e.user_id===t&&(e.state.follow=!0)})),this.list2.forEach((function(e){e.user_id===t&&(e.state.follow=!0)})),uni.showToast({title:"关注成功"})},doSupport:function(t){var e=this,n=this.tabIndex+1;this["list"+n].forEach((function(n){if(n.id===t.id)if("support"===t.type){if(0===n.state.type)n.like_count++;else{if(2!==n.state.type)return e.$U.toast("已操作过哦");n.like_count++,n.unlike_count--}n.state.type=1}else{if(0===n.state.type)n.unlike_count++;else{if(1!==n.state.type)return e.$U.toast("已操作过哦");n.like_count--,n.unlike_count++}n.state.type=2}}));var i="support"===t.type?"顶":"踩";this.$U.toast(i+"成功")}}};e.default=f},af93:function(t,e,n){"use strict";n.r(e);var i=n("a16f"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},d0ff:function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function a(t){if(Array.isArray(t))return i(t)}n.r(e);n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n("fb6a"),n("25f0");function r(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return a(t)||o(t)||r(t)||s()}n.d(e,"default",(function(){return u}))},d154:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("topic-info",{attrs:{info:t.info}}),n("divider"),t._l(t.recommendList,(function(e,i){return n("v-uni-view",{key:i,staticClass:"p-2 flex align-center border-bottom",attrs:{"hover-class":"bg-light"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDetail(i)}}},[n("v-uni-text",{staticClass:"iconfont icon-xihuan text-main"}),n("v-uni-text",{staticClass:"font text-dark text-ellipsis",staticStyle:{height:"30rpx","line-height":"30rpx"}},[t._v(t._s(e.title))])],1)})),n("divider"),n("v-uni-view",{staticClass:"flex align-center py-2"},t._l(t.tabBars,(function(e,i){return n("v-uni-view",{key:i,staticClass:"flex-1 flex align-center justify-center",class:i===t.tabIndex?"font-lg font-weight-bold text-main":"font-md",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTab(i)}}},[t._v(t._s(e.name))])})),1),t.listData.length>0?[t._l(t.listData,(function(t,e){return[n("common-list",{key:e+"_0",attrs:{item:t,index:e}}),n("divider")]}))]:[n("no-thing")],n("load-more",{attrs:{loadmore:t.loadtext}})],2)},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},f226:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"flex align-center justify-center py-3"},[n("v-uni-text",{staticClass:"font text-light-muted"},[t._v(t._s(t.loadmore))])],1)},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},ffb8:function(t,e,n){"use strict";n.r(e);var i=n("59b8"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a}}]);
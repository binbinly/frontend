(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-search-search"],{"0a7d":function(t,e,n){"use strict";var i=n("a1d7"),a=n.n(i);a.a},"59b8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:["loadmore"]};e.default=i},6375:function(t,e,n){"use strict";n.r(e);var i=n("f226"),a=n("ffb8");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,c=n("f0c5"),u=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"715ba14a",null,!1,i["a"],o);e["default"]=u.exports},"6d63":function(t,e,n){"use strict";var i={userList:n("861f").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"flex align-center px-2 position-fixed left-0 top-0 right-0 bg-white",staticStyle:{height:"88rpx","z-index":"9999"}},[n("v-uni-view",{staticClass:"iconfont icon-sousuo position-absolute text-muted",staticStyle:{left:"30rpx"}}),n("v-uni-input",{staticClass:"flex-1 rounded bg-light",staticStyle:{padding:"5rpx 0 5rpx 50rpx"},attrs:{type:"text",placeholder:"搜索","placeholder-style":"color: #CCCCCC;"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.searchEvent.apply(void 0,arguments)}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),n("v-uni-text",{staticClass:"pl-2",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}},[t._v("取消")])],1),n("v-uni-view",{staticStyle:{height:"88rpx"}}),0===t.searchList.length?[n("v-uni-view",{staticClass:"py-2 font-md px-2"},[t._v("搜索历史")]),n("v-uni-view",{staticClass:"flex flex-wrap"},t._l(t.list,(function(e,i){return n("v-uni-view",{key:i,staticClass:"border rounded font mx-2 my-1 px-2",attrs:{"hover-class":"bg-light"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.clickSearchHistory(e)}}},[t._v(t._s(e))])})),1)]:[t._l(t.searchList,(function(e,i){return[3===t.type?[n("common-list",{attrs:{item:e,index:i}})]:2===t.type?[n("topic-list",{attrs:{item:e,index:i}})]:[n("user-list",{attrs:{item:e,index:i}})]]})),n("load-more",{attrs:{loadmore:t.loadmore}})]],2)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},"7cdc":function(t,e,n){"use strict";n.r(e);var i=n("cf9c"),a=n("977a");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,c=n("f0c5"),u=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"7bca7b78",null,!1,i["a"],o);e["default"]=u.exports},"7f3c":function(t,e,n){"use strict";n.r(e);var i=n("995f"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"861f":function(t,e,n){"use strict";n.r(e);var i=n("c3aa"),a=n("7f3c");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,c=n("f0c5"),u=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"eac2399e",null,!1,i["a"],o);e["default"]=u.exports},"94af":function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{item:Object,index:Number,choose:{type:Boolean,default:!1}},methods:{open:function(){if(this.choose)return uni.$emit("chooseTopic",{id:this.item.id,title:this.item.title}),uni.navigateBack({delta:1});uni.navigateTo({url:"../../pages/topic-detail/topic-detail?id="+this.item.id})}}};e.default=i},"977a":function(t,e,n){"use strict";n.r(e);var i=n("94af"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},9834:function(t,e,n){"use strict";n.r(e);var i=n("b1ff"),a=n("e18f");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("0a7d");var o,c=n("f0c5"),u=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"1deb21f2",null,!1,i["a"],o);e["default"]=u.exports},"995f":function(t,e,n){"use strict";var i=n("ee27");n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("9834")),r={components:{uniBadge:a.default},props:{item:Object,index:Number},methods:{open:function(){uni.navigateTo({url:"/pages/user-space/user-space?user_id="+this.item.user_id})}}};e.default=r},a1d7:function(t,e,n){var i=n("ea80");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("3593cb2b",i,!0,{sourceMap:!1,shadowMode:!1})},a93a:function(t,e,n){"use strict";n.r(e);var i=n("ba78"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},b1ff:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.text?n("v-uni-view",{staticClass:"uni-badge",class:t.inverted?"uni-badge-"+t.type+" uni-badge--"+t.size+" uni-badge-inverted":"uni-badge-"+t.type+" uni-badge--"+t.size,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick()}}},[t._t("default"),t._v(t._s(t.text))],2):t._e()},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},ba78:function(t,e,n){"use strict";var i=n("ee27");n("99af"),n("c740"),n("4160"),n("e25e"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("d0ff")),r=i(n("2f50")),o=i(n("7cdc")),c=i(n("861f")),u=i(n("6375")),s={components:{commonList:r.default,topicList:o.default,userList:c.default,loadMore:u.default},data:function(){return{searchText:"",list:[],searchList:[],type:3,loadmore:"上拉加载更多",page:1}},onNavigationBarSearchInputChanged:function(t){this.searchText=t.text},onNavigationBarButtonTap:function(t){0===t.index&&this.searchEvent()},onLoad:function(t){var e=this;t.type&&(this.type=parseInt(t.type));switch(this.type){case 3:"帖子",uni.$on("updateFollowOrSupport",(function(t){switch(t.type){case"follow":e.follow(t.data.user_id);break;case"support":e.doSupport(t.data);break}}));break;case 2:"话题";break;case 1:"用户";break}var n=uni.getStorageSync("historySeachText");n&&(this.list=JSON.parse(n))},onUnload:function(){3===this.type&&uni.$off("updateFollowOrSupport",(function(t){}))},onPullDownRefresh:function(){if(""===this.searchText)return uni.stopPullDownRefresh();this.getData(!0,(function(){uni.stopPullDownRefresh()}))},onReachBottom:function(){"上拉加载更多"===this.loadmore&&(this.loadmore="加载中...",this.getData(!1))},methods:{goBack:function(){uni.navigateBack({delta:1})},follow:function(t){this.searchList.forEach((function(e){e.user_id===t&&(e.state.follow=!0)})),uni.showToast({title:"关注成功"})},doSupport:function(t){var e=this;this.searchList.forEach((function(n){if(n.id===t.id)if("support"===t.type){if(0===n.state.type)n.like_count++;else{if(2!==n.state.type)return e.$U.toast("已操作过哦");n.like_count++,n.unlike_count--}n.state.type=1}else{if(0===n.state.type)n.unlike_count++;else{if(1!==n.state.type)return e.$U.toast("已操作过哦");n.like_count--,n.unlike_count++}n.state.type=2}}));var n="support"===t.type?"顶":"踩";uni.showToast({title:n+"成功"})},clickSearchHistory:function(t){this.searchText=t,this.searchEvent()},searchEvent:function(){var t=this;uni.hideKeyboard();var e=this.list.findIndex((function(e){return e===t.searchText}));-1!==e?this.$U.__toFirst(this.list,e):this.list.unshift(this.searchText),uni.setStorageSync("historySeachText",JSON.stringify(this.list)),this.getData()},getData:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];uni.showLoading({title:"加载中...",mask:!1}),this.page=e?1:this.page+1,this.$H.post("/search?p="+this.page,{q:this.searchText,t:this.type},{token:!0,noCheck:!0}).then((function(i){t.searchList=e?(0,a.default)(i):[].concat((0,a.default)(t.searchList),(0,a.default)(i)),t.loadmore=i.length<10?"没有更多了":"上拉加载更多",uni.hideLoading(),"function"===typeof n&&n()})).catch((function(e){t.page--,uni.hideLoading(),"function"===typeof n&&n()}))}}};e.default=s},bca7:function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniBadge",props:{type:{type:String,default:"default"},inverted:{type:Boolean,default:!1},text:{type:[String,Number],default:""},size:{type:String,default:"normal"}},methods:{onClick:function(){this.$emit("click")}}};e.default=i},c3aa:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"p-2 flex align-center border-bottom border-light-secondary",attrs:{"hover-class":"bg-light"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.open.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"rounded-circle mr-2",staticStyle:{width:"100rpx",height:"100rpx"},attrs:{src:t.item.avatar}}),n("v-uni-view",{staticClass:"flex flex-column flex-1"},[n("v-uni-text",{staticClass:"font-md text-dark"},[t._v(t._s(t.item.username))]),n("v-uni-text",{staticClass:"text-dark font-sm"},[t._v(t._s(t.item.hometown)+" | "+t._s(t.item.birthday))])],1),n("v-uni-view",{staticClass:"uni-icon"},[n("v-uni-text",{staticClass:"iconfont",class:1===t.item.gender?"icon-nan-color icon-nan":"icon-nv-color icon-nv"})],1)],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},cf9c:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"flex align-center p-2",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.open.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"rounded mr-2",staticStyle:{width:"150rpx",height:"150rpx"},attrs:{src:t.item.cover}}),n("v-uni-view",{staticClass:"flex flex-column flex-1"},[n("v-uni-text",{staticClass:"font-md text-dark"},[t._v("#"+t._s(t.item.title)+"#")]),n("v-uni-text",{staticClass:"font text-secondary"},[t._v(t._s(t.item.desc))]),n("v-uni-view",{staticClass:"flex align-center font text-secondary"},[n("v-uni-text",{staticClass:"mr-2"},[t._v("动态："+t._s(t.item.post_count))]),n("v-uni-text",[t._v("今日："+t._s(t.item.today_count))])],1)],1)],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},d0ff:function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function a(t){if(Array.isArray(t))return i(t)}n.r(e);n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n("fb6a"),n("25f0");function o(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return a(t)||r(t)||o(t)||c()}n.d(e,"default",(function(){return u}))},e18f:function(t,e,n){"use strict";n.r(e);var i=n("bca7"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},ea80:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".uni-badge[data-v-1deb21f2]{font-family:Helvetica Neue,Helvetica,sans-serif;box-sizing:border-box;font-size:12px;line-height:1;display:inline-block;padding:3px 6px;color:#333;border-radius:100px;background-color:#f1f1f1}.uni-badge.uni-badge-inverted[data-v-1deb21f2]{padding:0 5px 0 0;color:#999;background-color:initial}.uni-badge-primary[data-v-1deb21f2]{color:#fff;background-color:#007aff}.uni-badge-primary.uni-badge-inverted[data-v-1deb21f2]{color:#007aff;background-color:initial}.uni-badge-success[data-v-1deb21f2]{color:#fff;background-color:#4cd964}.uni-badge-success.uni-badge-inverted[data-v-1deb21f2]{color:#4cd964;background-color:initial}.uni-badge-warning[data-v-1deb21f2]{color:#fff;background-color:#f0ad4e}.uni-badge-warning.uni-badge-inverted[data-v-1deb21f2]{color:#f0ad4e;background-color:initial}.uni-badge-error[data-v-1deb21f2]{color:#fff;background-color:#dd524d}.uni-badge-error.uni-badge-inverted[data-v-1deb21f2]{color:#dd524d;background-color:initial}.uni-badge--small[data-v-1deb21f2]{-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:center center;transform-origin:center center}",""]),t.exports=e},f226:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"flex align-center justify-center py-3"},[n("v-uni-text",{staticClass:"font text-light-muted"},[t._v(t._s(t.loadmore))])],1)},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},ff7a:function(t,e,n){"use strict";n.r(e);var i=n("6d63"),a=n("a93a");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,c=n("f0c5"),u=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"93660426",null,!1,i["a"],o);e["default"]=u.exports},ffb8:function(t,e,n){"use strict";n.r(e);var i=n("59b8"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a}}]);